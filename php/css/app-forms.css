/* =========================================================
   CARVALLO FORMS — Standard UI (simétrico, 6 columnas, 3N STAR friendly)
   ✅ 6 campos por fila en PC/kiosco
   ✅ Botones abajo y centrados
   ✅ Buscador / panel / paginación incluidos
========================================================= */

*, *::before, *::after { box-sizing: border-box; }

:root{
  --bg:#fbf7ee;
  --surface:#ffffff;
  --surface2:#fff7e6;

  --ink:#0b0f19;
  --muted:#44516a;

  --yellow:#facc15;
  --yellow2:#f59e0b;

  --red:#e11d48;
  --red2:#b91c1c;

  --border:rgba(11,15,25,.14);
  --border2:rgba(11,15,25,.22);

  --radius:16px;
  --shadow:0 12px 26px rgba(11,15,25,.14);

  /* Ajuste compacto (entra más en 3N STAR) */
  --gap:10px;
  --gapY:8px;

  --label:10.5px;
  --font:11px;

  --h:30px;
}

/* Fondo general */
body{
  color:var(--ink);
  background:
    radial-gradient(1200px 600px at 20% 0%, rgba(250,204,21,.18), transparent 60%),
    radial-gradient(900px 520px at 100% 10%, rgba(225,29,72,.08), transparent 55%),
    var(--bg);
}

/* Layout de página */
.app{
  width:100%;
  max-width: 1100px;
  margin: 0 auto;
  padding: 12px;
  display:grid;
  gap: 12px;
}
.header{
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.title{
  font-weight:900;
  font-size: clamp(18px, 2.2vw, 26px);
  letter-spacing:.2px;
}
.form-title{
  margin: 0 0 12px;
  font-weight:900;
  letter-spacing:.2px;
}

/* Contenedores típicos */
.pos-wrap, .form-card, .table-wrap{ max-width: 960px; margin: 0 auto; }

/* Tarjeta principal del formulario */
.form-card{
  background:linear-gradient(180deg,var(--surface) 0%,var(--surface2) 100%);
  border:1px solid var(--border);
  border-top:4px solid rgba(250,204,21,.95);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px 16px 14px;
}
.form-card h1, .form-card h2, .form-card h3{
  margin:0 0 10px;
  font-weight:900;
  letter-spacing:.2px;
}

/* =========================================================
   FORM LAYOUT (FLEX WRAP) — respeta ORDER por clases .f-*
   ✅ mantiene “6 columnas” en PC
   ✅ permite reordenar con order (porque en GRID no funciona)
========================================================= */
.app-form{
  --cols: 6;                 /* columnas “virtuales” */
  display:flex !important;
  flex-wrap:wrap;
  gap: var(--gapY) var(--gap);
  align-items:flex-end;
}

/* Cada campo ocupa 1 columna (de --cols) */
.app-form > div,
.app-form .form-group,
.app-form .campo,
.app-form .field{
  display:flex;
  flex-direction:column;
  gap:6px;
  min-width:0;
  flex: 0 0 calc((100% - (var(--cols) - 1) * var(--gap)) / var(--cols));
}

/* Utilidades de span (equivalentes a grid-column) */
.app-form .span-2{ flex-basis: calc(((100% - (var(--cols) - 1) * var(--gap)) / var(--cols)) * 2 + var(--gap)); }
.app-form .span-3{ flex-basis: calc(((100% - (var(--cols) - 1) * var(--gap)) / var(--cols)) * 3 + (var(--gap) * 2)); }
.app-form .span-4{ flex-basis: calc(((100% - (var(--cols) - 1) * var(--gap)) / var(--cols)) * 4 + (var(--gap) * 3)); }
.app-form .span-5{ flex-basis: calc(((100% - (var(--cols) - 1) * var(--gap)) / var(--cols)) * 5 + (var(--gap) * 4)); }
.app-form .span-6{ flex-basis: 100%; }

/* Botonera: siempre fila completa */
.form-actions{
  flex: 0 0 100%;
  width: 100%;
}

/* Cada campo */
.app-form > div,
.app-form .form-group,
.app-form .campo,
.app-form .field{
  display:flex;
  flex-direction:column;
  gap:6px;
  min-width:0;
}

/* Labels */
.app-form label,
.form-card label{
  font-size:var(--label);
  font-weight:900;
  line-height:1.15;
  color:var(--ink);
  margin:0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Inputs */
.app-form input,
.app-form select,
.app-form textarea{
  width:100% !important;
  max-width:100% !important;
  height:var(--h) !important;
  padding:5px 8px !important;
  font-size:var(--font) !important;
  color:var(--ink);
  background:#fff;
  border:1px solid var(--border2);
  border-radius:12px;
  outline:none;
}
.app-form textarea{
  min-height: 96px;
  height:auto !important;
  resize: vertical;
}
.app-form input:focus,
.app-form select:focus,
.app-form textarea:focus{
  border-color:rgba(250,204,21,.98);
  box-shadow:0 0 0 3px rgba(250,204,21,.20);
  background:rgba(250,204,21,.06);
}
::placeholder{ color:rgba(68,81,106,.75); }

/* =========================================================
   BOTONES — ABAJO y CENTRADOS
========================================================= */
.form-actions{
  grid-column: 1 / -1;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:12px;
  margin-top:6px;
}
.form-actions .btn{ width:auto; min-width:140px; }

/* Botones estándar */
.btn{
  height:36px;
  padding:0 14px;
  font-size:12px;
  font-weight:900;
  border-radius:12px;
  border:1px solid var(--border2);
  cursor:pointer;
  white-space:nowrap;
  box-shadow: 0 6px 14px rgba(11,15,25,.10);
  background: linear-gradient(180deg,#ffffff 0%, #f5f5f5 100%);
}
.btn.primary{
  background:linear-gradient(180deg,var(--yellow) 0%,var(--yellow2) 100%);
  border-color:rgba(245,158,11,.55);
  color:var(--ink);
}
.btn.secondary{
  background:linear-gradient(180deg,#111827 0%,#0b0f19 100%);
  border-color:rgba(255,255,255,.12);
  color:#fff;
}
.btn.danger{
  background:linear-gradient(180deg,var(--red) 0%,var(--red2) 100%);
  border-color:rgba(185,28,28,.55);
  color:#fff;
}

/* Utilidades de span (fallback global).
   Dentro de .app-form ya se calculan por flex-basis. */
.span-2,.span-3,.span-4,.span-5,.span-6{ width:auto; }
@media (max-width: 900px){
  .app-form{ --cols: 4; }
}
@media (max-width: 700px){
  .pos-wrap, .form-card, .table-wrap{ max-width:96vw; }
  .app-form{ --cols: 2; }
  .btn{ width:100%; }
}
@media (max-width: 480px){
  .app-form{ --cols: 1; }
  .form-actions{ flex-direction:column; }
  .form-actions .btn{ width:100%; min-width:0; }
}

/* =========================================================
   TABLA
========================================================= */
.table-wrap{
  margin-top:12px;
  max-height:calc(100vh - 320px);
  overflow:auto;
  border-radius:14px;
  border:1px solid var(--border);
  background:#fff;
}
.table{ width:100%; border-collapse:collapse; }
.table th, .table td{
  padding:8px 10px;
  font-size:12px;
  border-bottom:1px solid rgba(11,15,25,.08);
  vertical-align:middle;
}
.table thead th{
  position:sticky;
  top:0;
  z-index:1;
  background:linear-gradient(180deg,rgba(250,204,21,.26) 0%,rgba(255,247,230,.98) 100%);
  border-bottom:2px solid rgba(250,204,21,.98);
}

/* =========================================================
   BUSCADOR / PANEL / PAGINACIÓN / UTILIDADES
========================================================= */
.panel{
  padding: 14px 14px 10px;
  border-bottom: 1px solid rgba(11,15,25,.08);
  background: linear-gradient(180deg, rgba(255,255,255,.7) 0%, rgba(255,247,230,.8) 100%);
}
.grid-2{
  display:grid;
  grid-template-columns: 1fr 220px;
  gap: 12px;
  align-items:end;
}
@media (max-width: 820px){
  .grid-2{ grid-template-columns: 1fr; }
}

.control{ position:relative; width:100%; }
.control.has-icon .input{ padding-left: 34px !important; }
.icon-left{
  position:absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  opacity: .75;
}

/* Inputs fuera del form principal */
.input, .select{
  width:100%;
  max-width:100%;
  height: var(--h);
  padding: 5px 8px;
  font-size: var(--font);
  color: var(--ink);
  background:#fff;
  border:1px solid var(--border2);
  border-radius:12px;
  outline:none;
}
.input:focus, .select:focus{
  border-color:rgba(250,204,21,.98);
  box-shadow:0 0 0 3px rgba(250,204,21,.20);
  background:rgba(250,204,21,.06);
}

.scroll-x{ overflow:auto; width:100%; }
.nowrap{ white-space:nowrap; }
.right{ text-align:right; }
.mono{ font-variant-numeric: tabular-nums; }

.pager{
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 10px;
  padding: 12px;
  border-top: 1px solid rgba(11,15,25,.08);
  background: #fff;
}
.badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(11,15,25,.14);
  background: rgba(250,204,21,.10);
  font-weight: 900;
  font-size: 12px;
}
.btn.ghost{
  height: 34px;
  padding: 0 12px;
  border-radius: 12px;
  background: linear-gradient(180deg,#ffffff 0%, #f5f5f5 100%);
  border: 1px solid rgba(11,15,25,.18);
  box-shadow: 0 6px 14px rgba(11,15,25,.08);
}
.btn.ghost:disabled{ opacity:.5; cursor:not-allowed; }

.empty{
  padding: 14px;
  color: rgba(68,81,106,.85);
  font-weight: 800;
}

/* Toast */
.toast-wrap{
  position: fixed;
  right: 14px;
  bottom: 14px;
  display:flex;
  flex-direction:column;
  gap: 10px;
  z-index: 9999;
}
.toast{
  min-width: 240px;
  max-width: 320px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(11,15,25,.14);
  background: #fff;
  box-shadow: 0 12px 26px rgba(11,15,25,.16);
}
.toast.success{ border-left: 6px solid rgba(245,158,11,.9); }
.toast.error{ border-left: 6px solid rgba(225,29,72,.9); }
.toast .t-title{ font-weight: 900; margin-bottom: 2px; }
.toast .t-msg{ color: rgba(68,81,106,.9); font-size: 12px; }

/* Dialog */
dialog{
  border: none;
  border-radius: 16px;
  padding: 0;
  box-shadow: 0 18px 40px rgba(11,15,25,.28);
  width: min(720px, 92vw);
}
dialog::backdrop{ background: rgba(0,0,0,.35); }
.dialog-header{
  padding: 12px 14px;
  font-weight: 900;
  background: linear-gradient(180deg, rgba(250,204,21,.22) 0%, rgba(255,247,230,.98) 100%);
  border-bottom: 1px solid rgba(11,15,25,.10);
}
.dialog-body{ padding: 14px; background:#fff; }
.dialog-actions{
  padding: 12px 14px;
  display:flex;
  gap: 10px;
  justify-content:flex-end;
  border-top: 1px solid rgba(11,15,25,.10);
  background: #fff;
}
/* Tabla productos: imagen más chica y prolija */
.table td.img-cell{
  width: 64px;              /* ancho fijo de columna */
}

.table td.img-cell img{
  width: 48px;              /* tamaño imagen */
  height: 48px;
  object-fit: cover;        /* recorta sin deformar */
  border-radius: 10px;
  border: 1px solid rgba(11,15,25,.14);
  display:block;
  margin: 0 auto;           /* centrado */
}

/* En celular todavía más chica */
@media (max-width: 700px){
  .table td.img-cell{ width: 54px; }
  .table td.img-cell img{ width: 40px; height: 40px; }
}
